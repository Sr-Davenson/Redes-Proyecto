<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora FLSM</title>
  <link rel="stylesheet" href="../CSS/styleVLSM.css">
  <link rel="icon" type="image/x-icon" href="../Recuorse/Icon2.ico">
</head>
<body>
  <button id="toggle-tema" class="boton" style="position:absolute; top:10px; right:10px;">
    <img id="icono-tema" src="../Recuorse/dark_mode.png" alt="tema" style="width:24px; height:24px;">
  </button>

  <section class="contenedor">
    <h2>üì° Calculadora FLSM</h2>

    <label for="ip">Direcci√≥n IP:</label>
    <input type="text" id="ip" placeholder="Ej: 192.168.1.0">

    <label for="prefijo">Prefijo de red:</label>
    <input type="number" id="prefijo" placeholder="Ej: 24" min="1" max="32">

    <label for="cantidad">Cantidad de subredes:</label>
    <input type="number" id="cantidad" placeholder="Ej: 4" min="1">

    <button onclick="calcularFLSM()" class="boton">CALCULAR</button>

    <div style="margin-top: 12px;">
      <button id="btn-explicacion" class="boton" style="display:none;" onclick="verExplicacion()">üìñ Ver explicaci√≥n paso a paso</button>
      <button id="btn-pdf" class="boton" style="display:none;">‚¨á Descargar PDF</button>
    </div>

    <div id="tablaSubredes"></div>
    <div id="flsmResultados"></div>
  </section>

  <a href="../index.html" class="boton">Volver</a>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script src="../JS/FLSM.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const body = document.body;
      const botonTema = document.getElementById("toggle-tema");
      const iconoTema = document.getElementById("icono-tema");

      const iconos = {
        oscuro: {
          normal: "../Recuorse/light_mode.png",
          hover: "../Recuorse/light_mode.png"
        },
        claro: {
          normal: "../Recuorse/dark_mode.png",
          hover: "../Recuorse/dark_mode.png"
        }
      };

      const temaGuardado = localStorage.getItem("tema");
      if (temaGuardado === "modo-claro") {
        body.classList.add("modo-claro");
        iconoTema.src = iconos.claro.normal;
      } else {
        body.classList.add("modo-oscuro");
        iconoTema.src = iconos.oscuro.normal;
      }

      botonTema.addEventListener("click", () => {
        if (body.classList.contains("modo-oscuro")) {
          body.classList.replace("modo-oscuro", "modo-claro");
          localStorage.setItem("tema", "modo-claro");
          iconoTema.src = iconos.claro.normal;
        } else {
          body.classList.replace("modo-claro", "modo-oscuro");
          localStorage.setItem("tema", "modo-oscuro");
          iconoTema.src = iconos.oscuro.normal;
        }
      });

      botonTema.addEventListener("mouseenter", () => {
        iconoTema.src = body.classList.contains("modo-oscuro")
          ? iconos.oscuro.hover
          : iconos.claro.hover;
      });

      botonTema.addEventListener("mouseleave", () => {
        iconoTema.src = body.classList.contains("modo-oscuro")
          ? iconos.oscuro.normal
          : iconos.claro.normal;
      });
    });

    function verExplicacion() {
      const raw = localStorage.getItem("flsmDatos");
      if (!raw) {
        alert("‚ö†Ô∏è Primero presiona CALCULAR para generar resultados.");
        return;
      }
      window.location.href = "explicacionFlsm.html";
    }
  </script>
</body>
</html>
